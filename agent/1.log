D:\src\Python\mini_metro\AI_final_project>python agent/main.py
pygame 2.6.1 (SDL 2.28.4, Python 3.12.7)
Hello from the pygame community. https://www.pygame.org/contribute.html
Creating initial creatures: 100%|██████████████████████████████████████████████████████████████| 40/40 [00:28<00:00,  1.40it/s] 
iter 0
@0 96
w: {'C_dist': -0.6559258177208278, 'C_pass_density': 0.7177424988263983, 'C_station_type': 0.7487779132891594, 'C_dist_to_com': 
-0.06693139775861146, 'C_avr_path_length': -0.7533122706593802, 'C_avr_pass_density': 0.35777257975228993, 'C_total_station_types': -0.6994822092460939}
fits: [96, 93, 82, 76, 75, 71, 70, 69, 67, 62, 62, 61, 60, 60, 59, 59, 56, 56, 55, 55, 52, 51, 49, 48, 47, 47, 46, 45, 45, 44, 44, 43, 43, 42, 42, 42, 41, 36, 33, 30]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:03<00:00,  1.58s/it] 
iter 1
@0 107
w: {'C_dist': -0.23743349883132753, 'C_pass_density': -0.40086146576044734, 'C_station_type': 1.0126169124936575, 'C_dist_to_com': 0.17755483269396083, 'C_avr_path_length': -0.6495208372202851, 'C_avr_pass_density': 1.2307835825683258, 'C_total_station_types': -0.7221199714238846}
fits: [107, 96, 93, 93, 93, 89, 86, 82, 82, 80, 80, 78, 76, 75, 75, 74, 71, 71, 70, 70, 70, 70, 70, 70, 69, 69, 68, 67, 67, 67, 
67, 67, 67, 66, 65, 65, 64, 64, 64, 64]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:01<00:00,  1.54s/it] 
iter 2
@0 120
w: {'C_dist': 0.25431546965283136, 'C_pass_density': -0.7504311463699243, 'C_station_type': 0.41194996285962426, 'C_dist_to_com': 0.5531224837719604, 'C_avr_path_length': -0.6819262813369134, 'C_avr_pass_density': 1.317048179647881, 'C_total_station_types': -0.6892645481029371}
fits: [120, 107, 99, 97, 96, 94, 93, 93, 93, 89, 89, 88, 87, 86, 84, 83, 82, 82, 82, 82, 80, 80, 80, 80, 78, 78, 78, 78, 76, 76, 76, 76, 76, 75, 75, 74, 74, 74, 73, 72]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:08<00:00,  1.70s/it] 
iter 3
@0 144
w: {'C_dist': -0.564017091958934, 'C_pass_density': 0.1042264893421655, 'C_station_type': 0.8713445034030287, 'C_dist_to_com': -0.25675887240640866, 'C_avr_path_length': -0.42592773379350934, 'C_avr_pass_density': 0.7363135013184514, 'C_total_station_types': -0.6621988058054686}
fits: [144, 135, 120, 118, 115, 107, 107, 102, 99, 98, 97, 97, 96, 96, 94, 93, 93, 93, 92, 91, 91, 89, 89, 89, 88, 87, 87, 86, 86, 85, 85, 85, 84, 84, 83, 82, 82, 82, 82, 81]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:05<00:00,  1.65s/it]
iter 4
@0 144
w: {'C_dist': -0.564017091958934, 'C_pass_density': 0.1042264893421655, 'C_station_type': 0.8713445034030287, 'C_dist_to_com': -0.25675887240640866, 'C_avr_path_length': -0.42592773379350934, 'C_avr_pass_density': 0.7363135013184514, 'C_total_station_types': -0.6621988058054686}
fits: [144, 135, 120, 118, 115, 114, 114, 107, 107, 102, 101, 99, 98, 97, 97, 96, 96, 96, 94, 93, 93, 93, 92, 92, 92, 91, 91, 89, 89, 89, 88, 87, 87, 87, 86, 86, 86, 85, 85, 85]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:08<00:00,  1.72s/it]
iter 5
@0 144
w: {'C_dist': -0.564017091958934, 'C_pass_density': 0.1042264893421655, 'C_station_type': 0.8713445034030287, 'C_dist_to_com': -0.25675887240640866, 'C_avr_path_length': -0.42592773379350934, 'C_avr_pass_density': 0.7363135013184514, 'C_total_station_types': -0.6621988058054686}
fits: [144, 135, 131, 123, 120, 118, 115, 114, 114, 107, 107, 105, 102, 101, 99, 99, 98, 97, 97, 96, 96, 96, 95, 95, 94, 93, 93, 93, 92, 92, 92, 91, 91, 90, 89, 89, 89, 89, 88, 88]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:10<00:00,  1.75s/it]
iter 6
@0 144
w: {'C_dist': -0.564017091958934, 'C_pass_density': 0.1042264893421655, 'C_station_type': 0.8713445034030287, 'C_dist_to_com': -0.25675887240640866, 'C_avr_path_length': -0.42592773379350934, 'C_avr_pass_density': 0.7363135013184514, 'C_total_station_types': -0.6621988058054686}
fits: [144, 135, 131, 123, 120, 118, 115, 114, 114, 109, 107, 107, 107, 105, 103, 102, 102, 101, 99, 99, 98, 97, 97, 96, 96, 96, 95, 95, 94, 94, 94, 93, 93, 93, 93, 93, 92, 92, 92, 92]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:16<00:00,  1.91s/it]
iter 7
@0 144
w: {'C_dist': -0.564017091958934, 'C_pass_density': 0.1042264893421655, 'C_station_type': 0.8713445034030287, 'C_dist_to_com': -0.25675887240640866, 'C_avr_path_length': -0.42592773379350934, 'C_avr_pass_density': 0.7363135013184514, 'C_total_station_types': -0.6621988058054686}
fits: [144, 135, 131, 131, 127, 123, 121, 120, 118, 115, 114, 114, 113, 111, 109, 108, 107, 107, 107, 105, 103, 102, 102, 102, 102, 101, 99, 99, 98, 97, 97, 97, 96, 96, 96, 96, 96, 95, 95, 95]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:19<00:00,  1.98s/it]
iter 8
@0 147
w: {'C_dist': -1.3085358023146711, 'C_pass_density': 0.03086864317239519, 'C_station_type': 0.37645458575670454, 'C_dist_to_com': -0.390465851620852, 'C_avr_path_length': 0.2601161921907199, 'C_avr_pass_density': -0.12311153103865052, 'C_total_station_types': -0.4885275431488634}
fits: [147, 144, 135, 131, 131, 127, 123, 121, 120, 119, 118, 116, 115, 114, 114, 113, 112, 111, 109, 108, 107, 107, 107, 106, 105, 103, 102, 102, 102, 102, 102, 101, 99, 99, 98, 98, 97, 97, 97, 97]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:11<00:00,  1.79s/it]
iter 9
@0 147
w: {'C_dist': -1.3085358023146711, 'C_pass_density': 0.03086864317239519, 'C_station_type': 0.37645458575670454, 'C_dist_to_com': -0.390465851620852, 'C_avr_path_length': 0.2601161921907199, 'C_avr_pass_density': -0.12311153103865052, 'C_total_station_types': -0.4885275431488634}
fits: [147, 144, 135, 131, 131, 127, 123, 121, 120, 119, 118, 116, 116, 115, 114, 114, 113, 112, 112, 111, 109, 108, 107, 107, 107, 107, 106, 105, 105, 104, 103, 102, 102, 102, 102, 102, 101, 99, 99, 98]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:13<00:00,  1.83s/it]
iter 10
@0 147
w: {'C_dist': -1.3085358023146711, 'C_pass_density': 0.03086864317239519, 'C_station_type': 0.37645458575670454, 'C_dist_to_com': -0.390465851620852, 'C_avr_path_length': 0.2601161921907199, 'C_avr_pass_density': -0.12311153103865052, 'C_total_station_types': -0.4885275431488634}
fits: [147, 144, 135, 131, 131, 127, 123, 121, 120, 119, 118, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 109, 108, 107, 107, 107, 107, 106, 105, 105, 104, 104, 103, 103, 103, 102, 102, 102, 102, 102]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:12<00:00,  1.82s/it]
iter 11
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 135, 131, 131, 127, 126, 123, 121, 120, 119, 118, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 110, 109, 108, 108, 107, 107, 107, 107, 106, 106, 106, 105, 105, 104, 104, 103]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:13<00:00,  1.83s/it]
iter 12
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 135, 131, 131, 127, 126, 123, 121, 120, 119, 118, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 111, 111, 110, 109, 108, 108, 107, 107, 107, 107, 106, 106, 106, 106, 105, 105]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:12<00:00,  1.81s/it]
iter 13
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 140, 135, 131, 131, 127, 126, 125, 123, 121, 120, 119, 118, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 111, 111, 110, 110, 109, 108, 108, 108, 107, 107, 107, 107, 106, 106]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:20<00:00,  2.01s/it]
iter 14
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 144, 140, 137, 135, 131, 131, 127, 126, 125, 124, 123, 121, 120, 119, 118, 116, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 111, 111, 110, 110, 109, 108, 108, 108, 107, 107]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:13<00:00,  1.84s/it]
iter 15
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 144, 140, 137, 135, 131, 131, 127, 126, 125, 124, 123, 121, 120, 119, 118, 116, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 111, 111, 110, 110, 109, 108, 108, 108, 108, 107]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:09<00:00,  1.74s/it]
iter 16
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 144, 140, 137, 135, 131, 131, 129, 127, 126, 125, 124, 123, 121, 120, 120, 119, 118, 116, 116, 116, 115, 115, 114, 114, 113, 112, 112, 111, 111, 111, 111, 110, 110, 109, 108, 108, 108]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:09<00:00,  1.75s/it]
iter 17
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 147, 144, 144, 140, 137, 135, 131, 131, 129, 128, 127, 126, 125, 124, 123, 121, 120, 120, 119, 118, 117, 116, 116, 116, 115, 115, 114, 114, 114, 113, 113, 112, 112, 111, 111, 111, 111, 110, 110]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:13<00:00,  1.84s/it]
iter 18
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 156, 147, 144, 144, 140, 137, 136, 135, 131, 131, 129, 128, 127, 126, 125, 124, 123, 121, 120, 120, 119, 118, 117, 116, 116, 116, 115, 115, 114, 114, 114, 113, 113, 112, 112, 111, 111, 111, 111]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:14<00:00,  1.86s/it]
iter 19
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 156, 147, 144, 144, 140, 137, 136, 135, 131, 131, 129, 128, 127, 126, 125, 124, 123, 121, 120, 120, 119, 118, 117, 116, 116, 116, 115, 115, 114, 114, 114, 114, 113, 113, 112, 112, 111, 111, 111]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:13<00:00,  1.84s/it]
iter 20
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 156, 147, 144, 144, 140, 137, 136, 135, 131, 131, 129, 128, 127, 126, 125, 124, 123, 121, 120, 120, 119, 118, 117, 116, 116, 116, 115, 115, 114, 114, 114, 114, 113, 113, 112, 112, 111, 111, 111]
sel
Creating children: 100%|███████████████████████████████████████████████████████████████████████| 40/40 [01:08<00:00,  1.71s/it]
iter 21
@0 225
w: {'C_dist': -0.13481987995739636, 'C_pass_density': 0.05160201619080579, 'C_station_type': 1.2681687710016534, 'C_dist_to_com': 0.28028569029967365, 'C_avr_path_length': -0.418454582200844, 'C_avr_pass_density': 1.265816168030553, 'C_total_station_types': -0.9781890365637345}
fits: [225, 156, 147, 144, 144, 140, 137, 136, 135, 131, 131, 129, 128, 128, 127, 126, 125, 124, 123, 121, 120, 120, 119, 119, 118, 117, 116, 116, 116, 115, 115, 114, 114, 114, 114, 113, 113, 113, 112, 112]
sel
Creating children:  92%|█████████████████████████████████████████████████████████████████▋     | 37/40 [01:11<00:05,  1.93s/it]
Traceback (most recent call last):
  File "D:\src\Python\mini_metro\AI_final_project\agent\main.py", line 5, in <module>
    ga.run()
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga.py", line 132, in run
    self.cycle()
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga.py", line 123, in cycle
    new_population.extend(future.result())
                          ^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 401, in __get_result       
    raise self._exception
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga.py", line 113, in create_children
    child.try_calc_fitness()
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 175, in try_calc_fitness
    self.calc_fitness()
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 187, in calc_fitness
    scores = list(executor.map(lambda _: simulate_game(early_stopping=pseudo_min), range(8)))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 619, in result_iterator    
    yield _result_or_cancel(fs.pop())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 317, in _result_or_cancel  
    return fut.result(timeout)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\_base.py", line 401, in __get_result       
    raise self._exception
  File "C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 187, in <lambda>
    scores = list(executor.map(lambda _: simulate_game(early_stopping=pseudo_min), range(8)))
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 182, in simulate_game
    return game.play(early_stopping)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 227, in play
    self.act()
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 242, in act
    best_connect, connect_score = self.get_best_connect_actions()
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 285, in get_best_connect_actions
    score = self.player.score_C_connect(s1, s2, self.game.stations)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent\ga_entity.py", line 95, in score_C_connect
    dist_to_com = distance((s1.position + s2.position) * (1/2), self.com_cache) / mean_min_dist
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\src\Python\mini_metro\AI_final_project\agent/../src\geometry\utils.py", line 8, in distance
    return np.sqrt((p1.left - p2.left) ** 2 + (p1.top - p2.top) ** 2)
                              ^^^^^^^
AttributeError: 'NoneType' object has no attribute 'left'